{"ast":null,"code":"import _classCallCheck from \"D:\\\\DS\\\\react-demo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"D:\\\\DS\\\\react-demo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"D:\\\\DS\\\\react-demo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"D:\\\\DS\\\\react-demo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"D:\\\\DS\\\\react-demo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"D:\\\\DS\\\\react-demo\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"D:\\\\DS\\\\react-demo\\\\src\\\\patient\\\\medication-period-patient-page.js\";\nimport React from 'react';\nimport Button from \"react-bootstrap/Button\";\nimport * as MEDICATION_PERIOD_API from \"../medication-period/api/medication-period-api\";\nimport APIResponseErrorMessage from \"../commons/errorhandling/api-response-error-message\";\nimport { Col, Row } from \"reactstrap\";\nimport { FormGroup, Input, Label } from 'reactstrap';\nimport * as MEDICATION_API from \"../medication/api/medication-api\";\nimport * as MEDICATION_TIME_API from \"../medication-time/api/medication-time-api\";\nimport MedicationTimePatientTable from \"./medication-time-patient-table\";\nimport { Card, CardHeader, Modal, ModalBody, ModalHeader } from 'reactstrap';\nimport { Redirect } from 'react-router';\n\nvar MedicationPeriodPatientPage =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MedicationPeriodPatientPage, _React$Component);\n\n  function MedicationPeriodPatientPage(props) {\n    var _this;\n\n    _classCallCheck(this, MedicationPeriodPatientPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MedicationPeriodPatientPage).call(this, props));\n    _this.state = {\n      medicationPeriodId: props.match.params.id,\n      medicationPeriod: null,\n      isLoadedMedicationPeriod: false,\n      patientIdToRedirect: null,\n      errorStatusMedicationPeriod: 0,\n      errorMedicationPeriod: null,\n      medication: null,\n      isLoadedMedication: false,\n      errorStatusMedication: 0,\n      errorMedication: null,\n      tableData: [],\n      isLoadedTableData: false,\n      errorTable: null,\n      errorStatusTable: false,\n      showMessage: false,\n      message: null,\n      formIsValid: false,\n      redirect: false,\n      redirectTo: \"\",\n      insertTime: false,\n      formControls: {\n        startDate: {\n          value: ''\n        },\n        stopDate: {\n          value: ''\n        }\n      }\n    };\n    _this.fetchMedication = _this.fetchMedication.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.fetchMedicationPeriod = _this.fetchMedicationPeriod.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.afterFetchMedicationPeriod = _this.afterFetchMedicationPeriod.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.goToPatientPage = _this.goToPatientPage.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.fetchMedicationTimes = _this.fetchMedicationTimes.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    m;\n    return _this;\n  }\n\n  _createClass(MedicationPeriodPatientPage, [{\n    key: \"fetchMedicationTimes\",\n    value: function fetchMedicationTimes() {\n      var _this2 = this;\n\n      var medicationPeriodIdToSend = {\n        medicationPeriodId: this.state.medicationPeriodId\n      };\n      return MEDICATION_TIME_API.getMedicationTimeByMedicationPeriod(medicationPeriodIdToSend, function (result, status, err) {\n        if (result !== null && status === 200) {\n          _this2.state.tableData = result;\n          _this2.state.isLoadedTableData = true;\n\n          _this2.setState(_this2.state);\n        } else {\n          _this2.state.errorStatusTable = status;\n          _this2.state.errorTable = err;\n\n          _this2.setState(_this2.state);\n        }\n      });\n    }\n  }, {\n    key: \"goToPatientPage\",\n    value: function goToPatientPage() {\n      this.state.redirect = true;\n      this.state.redirectTo = \"/patientHome/\" + this.state.patientIdToRedirect;\n      this.setState(this.state);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchMedicationPeriod();\n    }\n  }, {\n    key: \"afterFetchMedicationPeriod\",\n    value: function afterFetchMedicationPeriod() {\n      this.fetchMedicationTimes();\n      this.fetchMedication();\n    }\n  }, {\n    key: \"fetchMedication\",\n    value: function fetchMedication() {\n      var _this3 = this;\n\n      var medicationIdToSend = {\n        id: this.state.medicationPeriod.medicationId\n      };\n      return MEDICATION_API.getMedicationById(medicationIdToSend, function (result, status, err) {\n        if (result !== null && status === 200) {\n          _this3.state.medication = result;\n          _this3.state.isLoadedMedication = true;\n\n          _this3.setState(_this3.state);\n        } else {\n          _this3.state.errorStatusMedication = status;\n          _this3.state.errorMedication = err;\n\n          _this3.setState(_this3.state);\n        }\n      });\n    }\n  }, {\n    key: \"fetchMedicationPeriod\",\n    value: function fetchMedicationPeriod() {\n      var _this4 = this;\n\n      var medicationPeriodIdToSend = {\n        id: this.state.medicationPeriodId\n      };\n      return MEDICATION_PERIOD_API.getMedicationPeriodById(medicationPeriodIdToSend, function (result, status, err) {\n        if (result !== null && status === 200) {\n          _this4.state.medicationPeriod = result;\n          _this4.state.isLoadedMedicationPeriod = true;\n          _this4.state.formControls.startDate.value = result.startDate;\n          _this4.state.formControls.stopDate.value = result.stopDate;\n          _this4.state.patientIdToRedirect = result.patientId;\n\n          _this4.setState(_this4.state);\n\n          _this4.afterFetchMedicationPeriod(); // console.log(\"MEdication:: \" + result);\n          // console.log(\"Medication resumt : \" + JSON.stringify(result)); zicea ceva a nu vedea ca primea object si nii in console nu il afica ca obiect numai [Object object]\n\n        } else {\n          _this4.state.errorStatusMedicationPeriod = status;\n          _this4.state.errorMedicationPeriod = err;\n\n          _this4.setState(_this4.state);\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, this.state.redirect && React.createElement(Redirect, {\n        to: this.state.redirectTo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }), React.createElement(Button, {\n        type: \"submit\",\n        onClick: this.goToPatientPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, \"  Go Back \"), this.state.errorMedicationPeriod > 0 && React.createElement(APIResponseErrorMessage, {\n        errorStatus: this.state.errorStatusMedicationPeriod,\n        error: this.state.errorMedicationPeriod,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }), React.createElement(FormGroup, {\n        id: \"startDate\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"startDateField\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190\n        },\n        __self: this\n      }, \" startDate: \"), React.createElement(Input, {\n        name: \"startDate\",\n        id: \"startDateField\",\n        defaultValue: this.state.formControls.startDate.value,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      })), React.createElement(FormGroup, {\n        id: \"stopDate\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197\n        },\n        __self: this\n      }, React.createElement(Label, {\n        for: \"stopDateField\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, \" stopDate: \"), React.createElement(Input, {\n        name: \"stopDate\",\n        id: \"stopDateField\",\n        defaultValue: this.state.formControls.stopDate.value,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199\n        },\n        __self: this\n      })), this.state.isLoadedMedication && React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(Col, {\n        sm: {\n          size: '4',\n          offset: 8\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, \"  \", JSON.stringify(this.state.medication), \" \"))), React.createElement(CardHeader, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, \" Time \")), React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222\n        },\n        __self: this\n      }, React.createElement(Col, {\n        sm: {\n          size: '8',\n          offset: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, this.state.isLoadedTableData && React.createElement(MedicationTimePatientTable, {\n        tableData: this.state.tableData,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }), this.state.errorStatus > 0 && React.createElement(APIResponseErrorMessage, {\n        errorStatusTable: this.state.errorStatusTable,\n        error: this.state.errorTable,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      })))));\n    }\n  }]);\n\n  return MedicationPeriodPatientPage;\n}(React.Component);\n\nexport default MedicationPeriodPatientPage;","map":{"version":3,"sources":["D:\\DS\\react-demo\\src\\patient\\medication-period-patient-page.js"],"names":["React","Button","MEDICATION_PERIOD_API","APIResponseErrorMessage","Col","Row","FormGroup","Input","Label","MEDICATION_API","MEDICATION_TIME_API","MedicationTimePatientTable","Card","CardHeader","Modal","ModalBody","ModalHeader","Redirect","MedicationPeriodPatientPage","props","state","medicationPeriodId","match","params","id","medicationPeriod","isLoadedMedicationPeriod","patientIdToRedirect","errorStatusMedicationPeriod","errorMedicationPeriod","medication","isLoadedMedication","errorStatusMedication","errorMedication","tableData","isLoadedTableData","errorTable","errorStatusTable","showMessage","message","formIsValid","redirect","redirectTo","insertTime","formControls","startDate","value","stopDate","fetchMedication","bind","fetchMedicationPeriod","afterFetchMedicationPeriod","goToPatientPage","fetchMedicationTimes","m","medicationPeriodIdToSend","getMedicationTimeByMedicationPeriod","result","status","err","setState","medicationIdToSend","medicationId","getMedicationById","getMedicationPeriodById","patientId","size","offset","JSON","stringify","errorStatus","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\n import Button from \"react-bootstrap/Button\";\r\nimport * as MEDICATION_PERIOD_API from \"../medication-period/api/medication-period-api\";\r\nimport APIResponseErrorMessage from \"../commons/errorhandling/api-response-error-message\";\r\nimport {Col, Row} from \"reactstrap\";\r\nimport { FormGroup, Input, Label} from 'reactstrap';\r\nimport * as MEDICATION_API from \"../medication/api/medication-api\";\r\nimport * as MEDICATION_TIME_API from \"../medication-time/api/medication-time-api\";\r\n\r\n\r\n  \r\nimport MedicationTimePatientTable from \"./medication-time-patient-table\";\r\n\r\n import {\r\n \r\n    Card,\r\n    CardHeader,\r\n     Modal,\r\n    ModalBody,\r\n    ModalHeader,\r\n    \r\n} from 'reactstrap';\r\nimport { Redirect } from 'react-router';\r\n\r\n\r\nclass MedicationPeriodPatientPage extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n  \r\n        this.state = {\r\n            medicationPeriodId : props.match.params.id,\r\n            medicationPeriod : null,\r\n            isLoadedMedicationPeriod : false,\r\n\r\n            patientIdToRedirect : null,\r\n            errorStatusMedicationPeriod: 0,\r\n            errorMedicationPeriod: null,\r\n             \r\n\r\n            medication : null,\r\n            isLoadedMedication : false,\r\n\r\n            errorStatusMedication: 0,\r\n            errorMedication: null,\r\n\r\n            tableData : [],\r\n            isLoadedTableData: false , \r\n            \r\n            errorTable: null,\r\n            errorStatusTable : false,\r\n\r\n            showMessage : false,\r\n            message : null,\r\n\r\n            formIsValid: false,\r\n\r\n\r\n\r\n            redirect : false,\r\n            redirectTo : \"\",\r\ninsertTime : false,\r\n\r\n            formControls: {\r\n                startDate: {\r\n                    value: ''\r\n                   \r\n                },\r\n                stopDate: {\r\n                    value: ''\r\n                \r\n                }\r\n                 \r\n            }\r\n        };\r\n\r\n      \r\n        this.fetchMedication = this.fetchMedication.bind(this);\r\n        this.fetchMedicationPeriod = this.fetchMedicationPeriod.bind(this);\r\n        this.afterFetchMedicationPeriod = this.afterFetchMedicationPeriod.bind(this);\r\n\r\n         this.goToPatientPage = this.goToPatientPage.bind(this);\r\n         this.fetchMedicationTimes = this.fetchMedicationTimes.bind(this);\r\nm\r\n    }\r\n\r\n  \r\n  \r\n\r\n    fetchMedicationTimes() {\r\n\r\n        let medicationPeriodIdToSend = {\r\n            medicationPeriodId : this.state.medicationPeriodId\r\n        };\r\n         return MEDICATION_TIME_API.getMedicationTimeByMedicationPeriod(medicationPeriodIdToSend,(result, status, err) => {\r\n            if (result !== null && status === 200) {\r\n                  this.state.tableData = result;\r\n                 this.state.isLoadedTableData = true; \r\n                 this.setState(this.state);\r\n             } else {\r\n                  this.state.errorStatusTable = status;\r\n                 this.state.errorTable = err;\r\n                 this.setState(this.state);\r\n                 \r\n            }\r\n         \r\n        });\r\n    }\r\ngoToPatientPage()\r\n{\r\n    this.state.redirect = true;\r\n    this.state.redirectTo = \"/patientHome/\"+this.state.patientIdToRedirect;\r\n    this.setState(this.state);\r\n}\r\n   \r\n \r\n\r\n\r\ncomponentDidMount()\r\n{\r\n    this.fetchMedicationPeriod();\r\n }\r\n\r\n afterFetchMedicationPeriod()\r\n {\r\n\r\n \r\n\r\n    this.fetchMedicationTimes();\r\n\r\n     this.fetchMedication();\r\n }\r\nfetchMedication() {\r\n\r\n    let medicationIdToSend = {\r\n        id : this.state.medicationPeriod.medicationId\r\n    };\r\n    return MEDICATION_API.getMedicationById(medicationIdToSend,(result, status, err) => {\r\n\r\n        if (result !== null && status === 200) {\r\n            this.state.medication = result;\r\n            this.state.isLoadedMedication = true;\r\n            this.setState(this.state);\r\n         } else {\r\n            this.state.errorStatusMedication = status;\r\n            this.state.errorMedication = err;\r\n            this.setState(this.state);\r\n        }\r\n    });\r\n}\r\nfetchMedicationPeriod() {\r\nlet medicationPeriodIdToSend = {\r\n    id : this.state.medicationPeriodId\r\n};\r\n \r\n  return MEDICATION_PERIOD_API.getMedicationPeriodById(medicationPeriodIdToSend,(result, status, err) => {\r\n\r\n        if (result !== null && status === 200) {\r\n  this.state.medicationPeriod = result;\r\n  this.state.isLoadedMedicationPeriod = true;\r\n  this.state.formControls.startDate.value = result.startDate;\r\n  this.state.formControls.stopDate.value = result.stopDate;\r\n  this.state.patientIdToRedirect = result.patientId;\r\n  this.setState(this.state);\r\n  this.afterFetchMedicationPeriod()\r\n            // console.log(\"MEdication:: \" + result);\r\n          // console.log(\"Medication resumt : \" + JSON.stringify(result)); zicea ceva a nu vedea ca primea object si nii in console nu il afica ca obiect numai [Object object]\r\n        } else {\r\n            this.state.errorStatusMedicationPeriod = status;\r\n            this.state.errorMedicationPeriod = err;\r\n            this.setState(this.state);\r\n        }\r\n    });\r\n}\r\n \r\n    \r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.state.redirect && <Redirect to = {this.state.redirectTo}/>}\r\n                <Button type={\"submit\"}  onClick={this.goToPatientPage}>  Go Back </Button>\r\n\r\n\r\n{\r\n                    this.state.errorMedicationPeriod > 0 &&\r\n                    <APIResponseErrorMessage errorStatus={this.state.errorStatusMedicationPeriod} error={this.state.errorMedicationPeriod}/>\r\n                }\r\n                <FormGroup id='startDate'>\r\n                    <Label for='startDateField'> startDate: </Label>\r\n                    <Input name='startDate' id='startDateField'  \r\n                            defaultValue={this.state.formControls.startDate.value}\r\n                     />\r\n                  \r\n                </FormGroup>\r\n\r\n                <FormGroup id='stopDate'>\r\n                    <Label for='stopDateField'> stopDate: </Label>\r\n                    <Input name='stopDate' id='stopDateField'  \r\n                            defaultValue={this.state.formControls.stopDate.value}\r\n                         \r\n                    />\r\n                 </FormGroup>\r\n\r\n                {this.state.isLoadedMedication &&\r\n                <Row>\r\n                        <Col sm={{size: '4', offset: 8}}>\r\n                            <p>  {JSON.stringify(this.state.medication)} </p>\r\n                        </Col>\r\n                    </Row>\r\n    }\r\n                    \r\n\r\n\r\n\r\n\r\n                   < CardHeader>\r\n                    <strong> Time </strong>\r\n                </CardHeader>\r\n                <Card>\r\n                  \r\n                    <Row>\r\n                        <Col sm={{size: '8', offset: 1}}>\r\n                            {this.state.isLoadedTableData && <MedicationTimePatientTable tableData = {this.state.tableData} />}\r\n                            {this.state.errorStatus > 0 && <APIResponseErrorMessage\r\n                                                            errorStatusTable={this.state.errorStatusTable}\r\n                                                            error={this.state.errorTable}\r\n                                                        />   }\r\n                        </Col>\r\n                    </Row>\r\n                </Card>\r\n \r\n\r\n                    \r\n\r\n                 \r\n\r\n            </div>\r\n        ) ;\r\n    }\r\n}\r\n\r\nexport default MedicationPeriodPatientPage;\r\n"]},"metadata":{},"sourceType":"module"}